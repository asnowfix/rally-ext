<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="setting-section.html">
<link rel="import" href="copy-to-clipboard.html">

<dom-module id="rally-options">

  <style>
  a { text-decoration: none; color:white}
  a:visited { text-decoration: none; }
  a:hover { text-decoration: none; }
  a:focus { text-decoration: none; }
  a:hover, a:active { text-decoration: none; }
  .settingBox {
    max-width: 400px;
  }
  paper-toolbar {
    /*Don't understand why this doesn't work*/
    --paper-toolbar-background : green;
    /*--paper-toolbar-background : #0096D6;*/
  }
  .page {
    padding: 48px 62px;
  }
  </style>

  <template>
    <paper-header-panel class="flex">
      <paper-toolbar>
        <span class="title">Rally Extension</span>
        <paper-button >
          <a target="_blank" href="https://github.com/ulybu/rally-ext">
            <span class="octicon octicon-logo-github"></span>
          </a>
        </paper-button>
      </paper-toolbar>
      <div class="page">
        <copy-to-clipboard on-save="save" conf="{{conf}}"></copy-to-clipboard>
        <setting-section notresetable sectionName="Second Section">
          <div class="settingBox" style = "min-height:100px;">
            Some settings
          </div>
        </setting-section>
      </div>
    </paper-header-panel>
  </template>

</dom-module>

<script>
  Polymer({
    is: 'rally-options',
    properties: {
      conf:{
        type:String
      }
    },
    created: function() {
      function whenConfLoaded () {
        this.conf = rallyExtension.config.get();
      }

      if(rallyExtension.config.confLoaded){
        whenConfLoaded();
      } else {
        document.addEventListener("rallyExt-configLoaded", whenConfLoaded.bind(this))
      }
    },
    save: function(e) {
      rallyExtension.config.set(this.conf);
    },
    ready: function() {
    },
    attached: function() {
    },
    detached: function() {
    },
  });
</script>
